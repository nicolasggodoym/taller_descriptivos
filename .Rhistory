descr(show = c("n", "mean", "sd", "md", "range")) %>%
#as.data.frame() %>%
select(Variable = var,
Media = mean,
"D. estandar" = sd,
Mediana = md,
Rango = range) %>%
mutate_at(vars(2, 3), ~(round(., digits = 3))) %>%
kable(caption = "MTC para horas de traslado y de trabajo no remunerado",
position = "center") %>%
kable_classic(full_width = F, html_font = "Cambria")
data %>%
select(traslado, serv_nr_ds) %>%
descr(show = c("n", "mean", "sd", "md", "range")) %>%
as.data.frame() %>%
select(Variable = var,
Media = mean,
"D. estandar" = sd,
Mediana = md,
Rango = range) %>%
mutate_at(vars(2, 3), ~(round(., digits = 3))) %>%
kable(caption = "MTC para horas de traslado y de trabajo no remunerado",
position = "center") %>%
kable_classic(full_width = F, html_font = "Cambria")
data %>%
select(starts_with("sat_")) %>%
plot_likert()
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo")
data %>% select(starts_with("sat_")) %>% frq()
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo")
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
theme_blank())
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo")
?plot_likert
plot_likert(data %>% select(starts_with("sat_")) )
plot_likert(data %>% select(starts_with("sat_")),
groups.titles = c("Satisfacción con situación económica",
"Satisfacción con trabajo",
"Satisfacción con cantidad de tiempo libre",
"Satisfacción con calidad de tiempo libre",
"Satisfacción con equilibrio familia-trabajo"))
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
catcount = 5)
plot_likert(data %>% select(starts_with("sat_")),
groups = c("Satisfacción con situación económica",
"Satisfacción con trabajo",
"Satisfacción con cantidad de tiempo libre",
"Satisfacción con calidad de tiempo libre",
"Satisfacción con equilibrio familia-trabajo"))
plot_likert(data %>% select(starts_with("sat_")),
axis.labels = c("Satisfacción con situación económica",
"Satisfacción con trabajo",
"Satisfacción con cantidad de tiempo libre",
"Satisfacción con calidad de tiempo libre",
"Satisfacción con equilibrio familia-trabajo"))
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
catcount = 5)
plot_likert(data %>% select(starts_with("sat_")),
catcount = 5,
axis.labels = c("Satisfacción con situación económica",
"Satisfacción con trabajo",
"Satisfacción con cantidad de tiempo libre",
"Satisfacción con calidad de tiempo libre",
"Satisfacción con equilibrio familia-trabajo"))
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
catcount = 5)
plot_likert(data %>% select(starts_with("sat_")),
catcount = 5,
reverse.scale = T,
axis.labels = c("Satisfacción con situación económica",
"Satisfacción con trabajo",
"Satisfacción con cantidad de tiempo libre",
"Satisfacción con calidad de tiempo libre",
"Satisfacción con equilibrio familia-trabajo"))
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T)
plot_likert(data %>% select(starts_with("sat_")),
catcount = 5,
reverse.scale = T,
axis.titles = c("Satisfacción con situación económica",
"Satisfacción con trabajo",
"Satisfacción con cantidad de tiempo libre",
"Satisfacción con calidad de tiempo libre",
"Satisfacción con equilibrio familia-trabajo"))
plot_likert(data %>% select(starts_with("sat_")),
catcount = 5,
reverse.scale = T,
axis.labels = c("Satisfacción con situación económica",
"Satisfacción con trabajo",
"Satisfacción con cantidad de tiempo libre",
"Satisfacción con calidad de tiempo libre",
"Satisfacción con equilibrio familia-trabajo"))
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T) +
theme_classic(axis.text.x = c("Satisfacción con situación económica",
"Satisfacción con trabajo",
"Satisfacción con cantidad de tiempo libre",
"Satisfacción con calidad de tiempo libre",
"Satisfacción con equilibrio familia-trabajo"))
?theme_classic
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T)
plot_likert(data %>% select(starts_with("sat_"),
title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T))
plot_likert(data %>% select(starts_with("sat_")),
title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T)
View(z)
plot_likert(data %>% select(starts_with("sat_")),
title = "Niveles de satisfacción con uso del tiempo"),
catcount = 5,
reverse.scale = T)
plot_likert(data %>% select(starts_with("sat_")),
title = "Niveles de satisfacción con uso del tiempo")
plot_likert(data %>% select(starts_with("sat_")),
title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T)
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T)
# Cargar paquetes ---------------------------------------------------------
pacman::p_load(tidyverse,
sjmisc,
sjPlot,
kableExtra) #Para phantomjs
data = readRDS("output/data/enut.rds")
plot_likert(data %>% select(starts_with("sat_")),
title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T)
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T)
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
#catcount = 5,
reverse.scale = T)
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T)
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
catcount = 5)
data %>%
select(starts_with("sat_")) %>%
plot_likert(
catcount = 5)
frq(data$sat_cal_tl)
# Cargar paquetes ---------------------------------------------------------
pacman::p_load(tidyverse,
sjmisc,
sjPlot,
kableExtra) #Para phantomjs
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T)
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T) +
theme(legend.text.align = T)
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T) +
theme(legend.text.align = .$sat_trab)
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T)
# Código de procesamiento -------------------------------------------------
# Cargar paquetes ---------------------------------------------------------
pacman::p_load(tidyverse,
haven,
sjmisc)
# Cargar datos ------------------------------------------------------------
# Deben descargar la base de datos en formato .dta del siguiente link
# https://www.ine.cl/estadisticas/sociales/genero/uso-del-tiempo
# luego, descomprimir y pegar en carpeta output/data
data = read_dta("input/data/BASE_USUARIO_corregida.dta")
# Explorar ----------------------------------------------------------------
find_var(data, "m12") #Tiempo de traslado al trabajo
# m12_1_1 (ida durante semana) y m12_1_2 (vuelta durante semana)
find_var(data, "quintil") #Quintil de ingreso
find_var(data, "cise_5") #CISE para filtrar
find_var(data, "serv_nr_ds") #Total de trabajo no remunerado dia semana
find_var(data, "t12") #Satisfacción con
#t12_1_1: situación económica
#t12_1_2: trabajo
#t12_1_3: cantidad de tiempo libre
#t12_1_4: calidad de tiempo libre
#t12_1_5: equilibrio entre trabajo y vida familiar
find_var(data, "Sexo") #c13_1_1
find_var(data, "pet") #Población en Edad de trabajar
find_var(data, "Var") #VarStrat = pseudo estratos
# VarUnit = pseudo-conglomerados
# Procesamiento de datos --------------------------------------------------
data = data %>%
filter(pet == 1 & #Población en edad de trabajar
cise_5 %in% c(1, 2, 3, 4, 96)) %>% #Personas ocupadas
select(id = id_persona, #Identificador
exp = wgt2, #Ponderador de personas cuestionario uso del tiepmo
varstrat = VarStrat, #Pseudo-estrato de varianza
varunit = VarUnit, #Pseudo-conglomerado de varianza
sexo = c13_1_1, #Sexo
quintil, #Quintil
traslado_i = m12_1_1, #Tiempo de traslado ida al trabajo
traslado_r = m12_1_2, #Tiempo de traslado regreso del trabajo
serv_nr_ds, #Servicios no remunerados en hogar día de semana
sat_econ = t12_1_1, #Satisfacción con situación económica
sat_trab = t12_1_2, #Satisfacción con trabajo
sat_can_tl = t12_1_3, #Satisfacción cantidad tiempo libre
sat_cal_tl = t12_1_4, #Satisfacción calidad tiempo libre
sat_eq = t12_1_5) %>% #Satisfacción equilibrio trabajo y familia
mutate_all(~(as.numeric(.))) %>%
mutate_at(vars(starts_with("traslado_|sat_")), ~(car::recode(., "96 = NA"))) %>%
mutate_at(vars(starts_with("sat_")), ~(car::recode(.,
recodes = c("1 = 'Totalmente insatisf.';
2 = 'Insatisf.';
3 = 'Ni satisf./a ni insatisf.';
4 = 'Satisf.';
5 = 'Totalmente satisf.';
85 = NA"), as.factor = T,
levels = c('Totalmente insatisf.',
'Insatisf.',
'Ni satisf. ni insatisf.',
'Satisf.',
'Totalmente satisf.')))) %>%
mutate(sexo = car::recode(.$sexo,
c("1 = 'Hombre';
2 = 'Mujer'"), as.factor = T),
quintil = forcats::as_factor(.$quintil)) %>%
rowwise() %>%
mutate(traslado = sum(traslado_i, traslado_r, na.rm = T)) %>%
ungroup() %>%
na.omit() %>%
select(-c(traslado_i, traslado_r)) %>%
filter(traslado <= 24)
# Exportar data -----------------------------------------------------------
saveRDS(data, "output/data/enut.rds")
data = readRDS("output/data/enut.rds")
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T)
View(data)
data %>%
select(starts_with("sat_")) %>%
plot_likert(title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T)
plot_likert(data %>% select(starts_with("sat_")),
title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T)
plot_likert(data %>% select(starts_with("sat_")),
title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T) +
theme(max.overlaps = 10)
plot_likert(data %>% select(starts_with("sat_")),
title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T) +
geom_text_repel()
# Cargar paquetes ---------------------------------------------------------
pacman::p_load(tidyverse,
sjmisc,
sjPlot,
ggrepel,
kableExtra) #Para phantomjs
plot_likert(data %>% select(starts_with("sat_")),
title = "Niveles de satisfacción con uso del tiempo",
catcount = 5,
reverse.scale = T) +
geom_text_repel()
knitr::opts_chunk$set(echo = F )
sjPlot::view_df()
sjPlot::view_df(data)
data = read_dta("input/data/BASE_USUARIO_corregida.dta")
frq(t12_1_1)
frq(data$t12_1_1)
pacman::p_load(tidyverse,
haven,
sjmisc,
sjlabelled)
data$id <- set_label(data$id, "Identificador")
data = data %>%
filter(pet == 1 & #Población en edad de trabajar
cise_5 %in% c(1, 2, 3, 4, 96)) %>% #Personas ocupadas
select(id = id_persona, #Identificador
exp = wgt2, #Ponderador de personas cuestionario uso del tiepmo
varstrat = VarStrat, #Pseudo-estrato de varianza
varunit = VarUnit, #Pseudo-conglomerado de varianza
sexo = c13_1_1, #Sexo
quintil, #Quintil
traslado_i = m12_1_1, #Tiempo de traslado ida al trabajo
traslado_r = m12_1_2, #Tiempo de traslado regreso del trabajo
serv_nr_ds, #Servicios no remunerados en hogar día de semana
sat_econ = t12_1_1, #Satisfacción con situación económica
sat_trab = t12_1_2, #Satisfacción con trabajo
sat_can_tl = t12_1_3, #Satisfacción cantidad tiempo libre
sat_cal_tl = t12_1_4, #Satisfacción calidad tiempo libre
sat_eq = t12_1_5) %>% #Satisfacción equilibrio trabajo y familia
mutate_all(~(as.numeric(.))) %>%
mutate_at(vars(starts_with("traslado_|sat_")), ~(car::recode(., "96 = NA"))) %>%
mutate_at(vars(starts_with("sat_")), ~(car::recode(.,
recodes = c("1 = 'Totalmente insatisf.';
2 = 'Insatisf.';
3 = 'Ni satisf./a ni insatisf.';
4 = 'Satisf.';
5 = 'Totalmente satisf.';
85 = NA"), as.factor = T,
levels = c('Totalmente insatisf.',
'Insatisf.',
'Ni satisf. ni insatisf.',
'Satisf.',
'Totalmente satisf.')))) %>%
mutate(sexo = car::recode(.$sexo,
c("1 = 'Hombre';
2 = 'Mujer'"), as.factor = T),
quintil = forcats::as_factor(.$quintil)) %>%
rowwise() %>%
mutate(traslado = sum(traslado_i, traslado_r, na.rm = T)) %>%
ungroup() %>%
na.omit() %>%
select(-c(traslado_i, traslado_r)) %>%
filter(traslado <= 24)
data$id <- set_label(data$id, "Identificador")
data$exp <- set_label(data$exp, "Ponderador")
# Código de procesamiento -------------------------------------------------
# Cargar paquetes ---------------------------------------------------------
pacman::p_load(tidyverse,
haven,
sjmisc,
sjlabelled)
# Cargar datos ------------------------------------------------------------
# Deben descargar la base de datos en formato .dta del siguiente link
# https://www.ine.cl/estadisticas/sociales/genero/uso-del-tiempo
# luego, descomprimir y pegar en carpeta output/data
data = read_dta("input/data/BASE_USUARIO_corregida.dta")
# Explorar ----------------------------------------------------------------
find_var(data, "m12") #Tiempo de traslado al trabajo
# m12_1_1 (ida durante semana) y m12_1_2 (vuelta durante semana)
find_var(data, "quintil") #Quintil de ingreso
find_var(data, "cise_5") #CISE para filtrar
find_var(data, "serv_nr_ds") #Total de trabajo no remunerado dia semana
find_var(data, "t12") #Satisfacción con
#t12_1_1: situación económica
#t12_1_2: trabajo
#t12_1_3: cantidad de tiempo libre
#t12_1_4: calidad de tiempo libre
#t12_1_5: equilibrio entre trabajo y vida familiar
find_var(data, "Sexo") #c13_1_1
find_var(data, "pet") #Población en Edad de trabajar
find_var(data, "Var") #VarStrat = pseudo estratos
# VarUnit = pseudo-conglomerados
# Procesamiento de datos --------------------------------------------------
data = data %>%
filter(pet == 1 & #Población en edad de trabajar
cise_5 %in% c(1, 2, 3, 4, 96)) %>% #Personas ocupadas
select(id = id_persona, #Identificador
exp = wgt2, #Ponderador de personas cuestionario uso del tiepmo
varstrat = VarStrat, #Pseudo-estrato de varianza
varunit = VarUnit, #Pseudo-conglomerado de varianza
sexo = c13_1_1, #Sexo
quintil, #Quintil
traslado_i = m12_1_1, #Tiempo de traslado ida al trabajo
traslado_r = m12_1_2, #Tiempo de traslado regreso del trabajo
serv_nr_ds, #Servicios no remunerados en hogar día de semana
sat_econ = t12_1_1, #Satisfacción con situación económica
sat_trab = t12_1_2, #Satisfacción con trabajo
sat_can_tl = t12_1_3, #Satisfacción cantidad tiempo libre
sat_cal_tl = t12_1_4, #Satisfacción calidad tiempo libre
sat_eq = t12_1_5) %>% #Satisfacción equilibrio trabajo y familia
mutate_all(~(as.numeric(.))) %>%
mutate_at(vars(starts_with("traslado_|sat_")), ~(car::recode(., "96 = NA"))) %>%
mutate_at(vars(starts_with("sat_")), ~(car::recode(.,
recodes = c("1 = 'Totalmente insatisf.';
2 = 'Insatisf.';
3 = 'Ni satisf./a ni insatisf.';
4 = 'Satisf.';
5 = 'Totalmente satisf.';
85 = NA"), as.factor = T,
levels = c('Totalmente insatisf.',
'Insatisf.',
'Ni satisf. ni insatisf.',
'Satisf.',
'Totalmente satisf.')))) %>%
mutate(sexo = car::recode(.$sexo,
c("1 = 'Hombre';
2 = 'Mujer'"), as.factor = T),
quintil = forcats::as_factor(.$quintil)) %>%
rowwise() %>%
mutate(traslado = sum(traslado_i, traslado_r, na.rm = T)) %>%
ungroup() %>%
na.omit() %>%
select(-c(traslado_i, traslado_r)) %>%
filter(traslado <= 24)
# Etiquetar variables -----------------------------------------------------
data$id <- set_label(data$id, "Identificador")
data$exp <- set_label(data$exp, "Ponderador")
data$varstrat <- set_label(data$varstrat, "Pseudo-estrato de varianza")
data$varunit <- set_label(data$varunit, "Pseudo-conglomerado de varianza")
data$sexo = set_label(data$sexo, "Sexo")
data$quintil = set_label(data$quintil, "Quintil de ingreso")
data$serv_nr_ds = set_label(data$serv_nr_ds, "Servicios de trabajo no remunerado (semana)")
data$sat_econ = set_label(data$sat_econ, "Satisfacción con situación económica")
data$sat_trab = set_label(data$sat_trab, "Satisfacción con el trabajo")
data$sat_can_tl = set_label(data$sat_can_tl, "Satisfacción con cantidad de tiempo libre")
data$sat_cal_tl = set_label(data$sat_cal_tl, "Satisfacción con calidad de tiempo libre")
data$sat_eq = set_label(data$sat_eq, "Satisfacción con equilibrio trabajo-familia")
data$traslado = set_label(data$traslado, "Tiempo de traslado al trabajo en semana (horas)")
# Exportar data -----------------------------------------------------------
saveRDS(data, "output/data/enut.rds")
?descr
descr(data$traslado)
# Cargar paquetes ---------------------------------------------------------
pacman::p_load(tidyverse,
sjmisc,
sjPlot,
ggrepel, #Para evitar solapamientos en grafico
webshot, #Para exportar las tablas
kableExtra) #Para tablas
data = readRDS("output/data/enut.rds")
data %>%
select(traslado, serv_nr_ds) %>%
descr(show = c("label", "n", "mean", "sd", "md", "range")) %>%
as.data.frame() %>%
select(Variable = var,
Etiqueta = label,
Media = mean,
"D. estandar" = sd,
Mediana = md,
Rango = range) %>%
mutate_at(vars(3, 4), ~(round(., digits = 3))) %>%
kable(caption = "MTC para horas de traslado y de trabajo no remunerado",
position = "center") %>%
kable_classic(full_width = F, html_font = "Cambria") %>%
save_kable(file = "output/fig/kbl.png")
a <- data %>%
select(traslado, serv_nr_ds) %>%
descr(show = c("label", "n", "mean", "sd", "md", "range")) %>%
as.data.frame() %>%
select(Variable = var,
Etiqueta = label,
Media = mean,
"D. estandar" = sd,
Mediana = md,
Rango = range) %>%
mutate_at(vars(3, 4), ~(round(., digits = 3))) %>%
kable(caption = "MTC para horas de traslado y de trabajo no remunerado",
position = "center") %>%
kable_classic(full_width = F, html_font = "Cambria")
a <- save_kable(a, file = "output/fig/kbl.png")
webshot::install_phantomjs(force = T)
a <- save_kable(a, file = "output/fig/kbl.png")
data %>%
select(traslado, serv_nr_ds) %>%
descr(show = c("label", "n", "mean", "sd", "md", "range")) %>%
as.data.frame() %>%
select(Variable = var,
Etiqueta = label,
Media = mean,
"D. estandar" = sd,
Mediana = md,
Rango = range) %>%
mutate_at(vars(3, 4), ~(round(., digits = 3))) %>%
kable(caption = "MTC para horas de traslado y de trabajo no remunerado",
position = "center") %>%
kable_classic(full_width = F, html_font = "Cambria")
